import{a as L,f as R}from"../chunks/DLW7Edu-.js";import{o as zt}from"../chunks/RoEmI7lP.js";import{y as Vt,z as jt,A as Ft,B as Jt,C as et,D as $t,l as Wt,t as a,F as U,G as Yt,H as l,I as t,J as e,K as V,L as Pt,M as j,N as Mt}from"../chunks/C2Snk8yw.js";import{d as Qt,s as mt}from"../chunks/DpkvAVPE.js";import{i as At}from"../chunks/DZ-Qxf6U.js";import{d as M,e as Xt,P as W,i as Zt,r as o,S as te,b as Ot,s as ee,a as p,c as Ct,f as Et,g as ht}from"../chunks/BE7FNBPe.js";const ae=[];function gt(n,G=!1,Y=!1){return ot(n,new Map,"",ae,null,Y)}function ot(n,G,Y,X,K=null,F=!1){if(typeof n=="object"&&n!==null){var Q=G.get(n);if(Q!==void 0)return Q;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(Vt(n)){var $=Array(n.length);G.set(n,$),K!==null&&G.set(K,$);for(var i=0;i<n.length;i+=1){var s=n[i];i in n&&($[i]=ot(s,G,Y,X,null,F))}return $}if(jt(n)===Ft){$={},G.set(n,$),K!==null&&G.set(K,$);for(var it in n)$[it]=ot(n[it],G,Y,X,null,F);return $}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function"&&!F)return ot(n.toJSON(),G,Y,X,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}var le=R("<li><button> </button></li>"),ie=R('<div class="space-y-4"><div><label class="hud-label block mb-1">Backend URL</label> <input type="text" class="hud-input w-full" placeholder="Leave empty for relative /api (default)"/> <p class="text-[9px] text-hud-text-dim mt-1">E.g. https://mahoraga.jurrejan.workers.dev/agent â€” leave empty for local dev.</p></div> <div><label class="hud-label block mb-1">API Token</label> <input type="password" class="hud-input w-full" placeholder="Enter MAHORAGA_API_TOKEN"/> <p class="text-[9px] text-hud-text-dim mt-1">Your MAHORAGA_API_TOKEN from Cloudflare secrets. Required for all API access.</p></div> <div class="flex items-center gap-4"><button class="hud-button">Save Connection</button> <!></div></div>'),se=R('<div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Max Position Value ($)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max Positions</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Position Size (% of Cash)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Starting Equity ($)</label> <input type="number" class="hud-input w-full"/> <p class="text-[9px] text-hud-text-dim mt-1">For P&L calculation</p></div></div>'),oe=R('<div class="space-y-4"><div><h3 class="hud-label mb-3 text-hud-primary">Sentiment Thresholds</h3> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Min Sentiment to Buy (0-1)</label> <input type="number" step="0.05" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Min Analyst Confidence (0-1)</label> <input type="number" step="0.05" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Sell Sentiment Threshold</label> <input type="number" step="0.05" class="hud-input w-full"/></div></div></div> <div><h3 class="hud-label mb-3 text-hud-primary">Stop Loss / Take Profit</h3> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Take Profit (%)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Stop Loss (%)</label> <input type="number" class="hud-input w-full"/></div></div></div> <div><h3 class="hud-label mb-3 text-hud-primary">Polling Intervals</h3> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Data Poll (ms)</label> <input type="number" step="1000" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Analyst Interval (ms)</label> <input type="number" step="1000" class="hud-input w-full"/></div></div></div></div>'),ne=R('<p class="text-[9px] text-hud-text-dim mb-3">Provider is set via LLM_PROVIDER env var (auto/openai/claude). Models must match your active provider.</p> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Research Model (cheap)</label> <select class="hud-input w-full"><optgroup label="Claude"><option>claude-haiku-4.5</option> <option>claude-sonnet-4.5</option></optgroup><optgroup label="OpenAI"><option>gpt-5-mini</option> <option>gpt-4o-mini</option></optgroup><optgroup label="OpenAI Reasoning"><option>o4-mini</option> <option>o3-mini</option></optgroup></select></div> <div><label class="hud-label block mb-1">Analyst Model (smart)</label> <select class="hud-input w-full"><optgroup label="Claude"><option>claude-opus-4.5 (best)</option> <option>claude-sonnet-4.5</option> <option>claude-haiku-4.5 (cheaper)</option></optgroup><optgroup label="OpenAI"><option>gpt-5</option> <option>gpt-5-mini</option> <option>gpt-4o</option></optgroup><optgroup label="OpenAI Reasoning"><option>o4-mini</option> <option>o3-mini</option></optgroup></select></div></div>',1),re=R('<div class="space-y-4"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hud-input w-4 h-4"/> <span class="hud-label">Enable Options Trading</span></label> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Min Confidence (0-1)</label> <input type="number" step="0.05" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max % Per Trade</label> <input type="number" step="0.5" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Min DTE (days)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max DTE (days)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Target Delta</label> <input type="number" step="0.05" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max Positions</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Stop Loss (%)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Take Profit (%)</label> <input type="number" class="hud-input w-full"/></div></div></div>'),ue=R('<div class="space-y-4"><div><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hud-input w-4 h-4"/> <span class="hud-label">Enable Crypto Trading</span></label> <p class="text-[9px] text-hud-text-dim mt-1">Trade crypto 24/7 based on momentum. Alpaca supports 20+ coins.</p></div> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Symbols (comma-separated)</label> <input type="text" class="hud-input w-full" placeholder="BTC/USD, ETH/USD, SOL/USD"/></div> <div><label class="hud-label block mb-1">Momentum Threshold (%)</label> <input type="number" step="0.5" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max Position ($)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Take Profit (%)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Stop Loss (%)</label> <input type="number" class="hud-input w-full"/></div></div></div>'),pe=R('<div class="space-y-4"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hud-input w-4 h-4"/> <span class="hud-label">Enable Stale Position Detection</span></label> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Max Hold Days</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Min Gain % to Keep</label> <input type="number" step="0.5" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Social Volume Decay</label> <input type="number" step="0.1" class="hud-input w-full"/> <p class="text-[9px] text-hud-text-dim mt-1">Exit if volume drops to this % of entry</p></div> <div><label class="hud-label block mb-1">No Mentions Hours</label> <input type="number" class="hud-input w-full"/> <p class="text-[9px] text-hud-text-dim mt-1">Exit if no mentions for N hours</p></div></div></div>'),de=R('<span class="text-[11px] text-hud-success"> </span>'),_e=R('<section id="section-trading"><!></section> <section id="section-risk"><!></section> <section id="section-llm"><!></section> <section id="section-options"><!></section> <section id="section-crypto"><!></section> <section id="section-stale"><!></section> <div class="fixed bottom-0 left-48 right-0 bg-hud-bg border-t border-hud-line p-4 flex items-center gap-4"><button class="hud-button"> </button> <!></div>',1),ve=R('<p class="text-hud-text-dim text-[11px]">Waiting for config from backend...</p>'),ce=R('<div class="min-h-screen bg-hud-bg flex"><nav class="w-48 shrink-0 border-r border-hud-line p-4 sticky top-0 h-screen"><a href="/" class="hud-label hover:text-hud-primary transition-colors block mb-6">&larr; DASHBOARD</a> <h2 class="text-sm font-light text-hud-text-bright mb-4">SETTINGS</h2> <ul class="space-y-1"></ul></nav> <main class="flex-1 max-w-4xl p-6 pb-20 space-y-6"><section id="section-connection"><!></section> <!></main></div>');function xe(n,G){Jt(G,!0);const Y=[{id:"connection",label:"Connection"},{id:"trading",label:"Trading"},{id:"risk",label:"Risk"},{id:"llm",label:"LLM"},{id:"options",label:"Options"},{id:"crypto",label:"Crypto"},{id:"stale",label:"Stale Positions"}];let X=et("connection"),K=et(!1),F=et(null),Q=et($t(localStorage.getItem("mahoraga_backend_url")||"")),$=et($t(localStorage.getItem("mahoraga_api_token")||"")),i=et(null);zt(()=>{M.status?M.config&&U(i,gt(M.config),!0):M.poll().then(()=>{M.config&&U(i,gt(M.config),!0)})}),Wt(()=>{M.config&&!a(i)&&U(i,gt(M.config),!0)});function s(N,P){a(i)&&U(i,{...a(i),[N]:P},!0)}function it(){a(Q)?localStorage.setItem("mahoraga_backend_url",a(Q)):localStorage.removeItem("mahoraga_backend_url"),a($)?localStorage.setItem("mahoraga_api_token",a($)):localStorage.removeItem("mahoraga_api_token"),M.poll(),yt("Connection settings saved")}async function ft(){if(a(i)){U(K,!0);try{await M.handleSaveConfig(a(i)),yt("Configuration saved")}finally{U(K,!1)}}}function yt(N){U(F,N,!0),setTimeout(()=>U(F,null),2e3)}function Dt(N){var P;U(X,N,!0),(P=document.getElementById(`section-${N}`))==null||P.scrollIntoView({behavior:"smooth"})}var nt=ce(),rt=l(nt),xt=t(l(rt),4);Xt(xt,21,()=>Y,Zt,(N,P)=>{var O=le(),C=l(O);C.__click=()=>Dt(a(P).id);var J=l(C,!0);e(C),e(O),j(()=>{ee(C,1,`w-full text-left px-2 py-1.5 text-[11px] transition-colors ${a(X)===a(P).id?"text-hud-text-bright bg-hud-line/30":"text-hud-text-dim hover:text-hud-text"}`),mt(J,a(P).label)}),L(N,O)}),e(xt),e(rt);var kt=t(rt,2),ut=l(kt),Lt=l(ut);W(Lt,{title:"CONNECTION",children:(N,P)=>{var O=ie(),C=l(O),J=t(l(C),2);o(J),V(2),e(C);var at=t(C,2),Z=t(l(at),2);o(Z),V(2),e(at);var st=t(at,2),tt=l(st);tt.__click=it;var pt=t(tt,2);{let q=Pt(()=>M.error?"error":M.status?"active":"inactive"),dt=Pt(()=>M.error?"DISCONNECTED":M.status?"CONNECTED":"UNKNOWN");te(pt,{get status(){return a(q)},get label(){return a(dt)}})}e(st),e(O),Ot(J,()=>a(Q),q=>U(Q,q)),Ot(Z,()=>a($),q=>U($,q)),L(N,O)},$$slots:{default:!0}}),e(ut);var Rt=t(ut,2);{var Gt=N=>{var P=_e(),O=Mt(P),C=l(O);W(C,{title:"POSITION LIMITS",children:(T,z)=>{var b=se(),f=l(b),x=t(l(f),2);o(x),x.__input=u=>s("max_position_value",Number(u.target.value)),e(f);var d=t(f,2),y=t(l(d),2);o(y),y.__input=u=>s("max_positions",Number(u.target.value)),e(d);var _=t(d,2),h=t(l(_),2);o(h),h.__input=u=>s("position_size_pct_of_cash",Number(u.target.value)),e(_);var g=t(_,2),m=t(l(g),2);o(m),m.__input=u=>s("starting_equity",Number(u.target.value)),V(2),e(g),e(b),j(()=>{p(x,a(i).max_position_value),p(y,a(i).max_positions),p(h,a(i).position_size_pct_of_cash),p(m,a(i).starting_equity||1e5)}),L(T,b)},$$slots:{default:!0}}),e(O);var J=t(O,2),at=l(J);W(at,{title:"RISK MANAGEMENT",children:(T,z)=>{var b=oe(),f=l(b),x=t(l(f),2),d=l(x),y=t(l(d),2);o(y),y.__input=w=>s("min_sentiment_score",Number(w.target.value)),e(d);var _=t(d,2),h=t(l(_),2);o(h),h.__input=w=>s("min_analyst_confidence",Number(w.target.value)),e(_);var g=t(_,2),m=t(l(g),2);o(m),m.__input=w=>s("sell_sentiment_threshold",Number(w.target.value)),e(g),e(x),e(f);var u=t(f,2),S=t(l(u),2),k=l(S),v=t(l(k),2);o(v),v.__input=w=>s("take_profit_pct",Number(w.target.value)),e(k);var A=t(k,2),I=t(l(A),2);o(I),I.__input=w=>s("stop_loss_pct",Number(w.target.value)),e(A),e(S),e(u);var r=t(u,2),E=t(l(r),2),D=l(E),B=t(l(D),2);o(B),B.__input=w=>s("data_poll_interval_ms",Number(w.target.value)),e(D);var H=t(D,2),c=t(l(H),2);o(c),c.__input=w=>s("analyst_interval_ms",Number(w.target.value)),e(H),e(E),e(r),e(b),j(()=>{p(y,a(i).min_sentiment_score),p(h,a(i).min_analyst_confidence),p(m,a(i).sell_sentiment_threshold),p(v,a(i).take_profit_pct),p(I,a(i).stop_loss_pct),p(B,a(i).data_poll_interval_ms),p(c,a(i).analyst_interval_ms)}),L(T,b)},$$slots:{default:!0}}),e(J);var Z=t(J,2),st=l(Z);W(st,{title:"LLM CONFIGURATION",children:(T,z)=>{var b=ne(),f=t(Mt(b),2),x=l(f),d=t(l(x),2);d.__change=bt=>s("llm_model",bt.target.value);var y=l(d),_=l(y);_.value=_.__value="claude-haiku-4-20250414";var h=t(_,2);h.value=h.__value="claude-sonnet-4-5-20250414",e(y);var g=t(y),m=l(g);m.value=m.__value="gpt-5-mini";var u=t(m,2);u.value=u.__value="gpt-4o-mini",e(g);var S=t(g),k=l(S);k.value=k.__value="o4-mini";var v=t(k,2);v.value=v.__value="o3-mini",e(S),e(d);var A;Ct(d),e(x);var I=t(x,2),r=t(l(I),2);r.__change=bt=>s("llm_analyst_model",bt.target.value);var E=l(r),D=l(E);D.value=D.__value="claude-opus-4-5-20251101";var B=t(D,2);B.value=B.__value="claude-sonnet-4-5-20250414";var H=t(B,2);H.value=H.__value="claude-haiku-4-20250414",e(E);var c=t(E),w=l(c);w.value=w.__value="gpt-5";var vt=t(w,2);vt.value=vt.__value="gpt-5-mini";var St=t(vt,2);St.value=St.__value="gpt-4o",e(c);var wt=t(c),ct=l(wt);ct.value=ct.__value="o4-mini";var Tt=t(ct,2);Tt.value=Tt.__value="o3-mini",e(wt),e(r);var It;Ct(r),e(I),e(f),j(()=>{A!==(A=a(i).llm_model)&&(d.value=(d.__value=a(i).llm_model)??"",Et(d,a(i).llm_model)),It!==(It=a(i).llm_analyst_model||"claude-sonnet-4-5-20250414")&&(r.value=(r.__value=a(i).llm_analyst_model||"claude-sonnet-4-5-20250414")??"",Et(r,a(i).llm_analyst_model||"claude-sonnet-4-5-20250414"))}),L(T,b)},$$slots:{default:!0}}),e(Z);var tt=t(Z,2),pt=l(tt);W(pt,{title:"OPTIONS TRADING (BETA)",children:(T,z)=>{var b=re(),f=l(b),x=l(f);o(x),x.__change=c=>s("options_enabled",c.target.checked),V(2),e(f);var d=t(f,2),y=l(d),_=t(l(y),2);o(_),_.__input=c=>s("options_min_confidence",Number(c.target.value)),e(y);var h=t(y,2),g=t(l(h),2);o(g),g.__input=c=>s("options_max_pct_per_trade",Number(c.target.value)),e(h);var m=t(h,2),u=t(l(m),2);o(u),u.__input=c=>s("options_min_dte",Number(c.target.value)),e(m);var S=t(m,2),k=t(l(S),2);o(k),k.__input=c=>s("options_max_dte",Number(c.target.value)),e(S);var v=t(S,2),A=t(l(v),2);o(A),A.__input=c=>s("options_target_delta",Number(c.target.value)),e(v);var I=t(v,2),r=t(l(I),2);o(r),r.__input=c=>s("options_max_positions",Number(c.target.value)),e(I);var E=t(I,2),D=t(l(E),2);o(D),D.__input=c=>s("options_stop_loss_pct",Number(c.target.value)),e(E);var B=t(E,2),H=t(l(B),2);o(H),H.__input=c=>s("options_take_profit_pct",Number(c.target.value)),e(B),e(d),e(b),j(()=>{ht(x,a(i).options_enabled||!1),p(_,a(i).options_min_confidence||.75),_.disabled=!a(i).options_enabled,p(g,a(i).options_max_pct_per_trade||2),g.disabled=!a(i).options_enabled,p(u,a(i).options_min_dte||7),u.disabled=!a(i).options_enabled,p(k,a(i).options_max_dte||45),k.disabled=!a(i).options_enabled,p(A,a(i).options_target_delta||.35),A.disabled=!a(i).options_enabled,p(r,a(i).options_max_positions||3),r.disabled=!a(i).options_enabled,p(D,a(i).options_stop_loss_pct||50),D.disabled=!a(i).options_enabled,p(H,a(i).options_take_profit_pct||100),H.disabled=!a(i).options_enabled}),L(T,b)},$$slots:{default:!0}}),e(tt);var q=t(tt,2),dt=l(q);W(dt,{title:"CRYPTO TRADING (24/7)",children:(T,z)=>{var b=ue(),f=l(b),x=l(f),d=l(x);o(d),d.__change=r=>s("crypto_enabled",r.target.checked),V(2),e(x),V(2),e(f);var y=t(f,2),_=l(y),h=t(l(_),2);o(h),h.__input=r=>s("crypto_symbols",r.target.value.split(",").map(E=>E.trim())),e(_);var g=t(_,2),m=t(l(g),2);o(m),m.__input=r=>s("crypto_momentum_threshold",Number(r.target.value)),e(g);var u=t(g,2),S=t(l(u),2);o(S),S.__input=r=>s("crypto_max_position_value",Number(r.target.value)),e(u);var k=t(u,2),v=t(l(k),2);o(v),v.__input=r=>s("crypto_take_profit_pct",Number(r.target.value)),e(k);var A=t(k,2),I=t(l(A),2);o(I),I.__input=r=>s("crypto_stop_loss_pct",Number(r.target.value)),e(A),e(y),e(b),j(r=>{ht(d,a(i).crypto_enabled||!1),p(h,r),h.disabled=!a(i).crypto_enabled,p(m,a(i).crypto_momentum_threshold||2),m.disabled=!a(i).crypto_enabled,p(S,a(i).crypto_max_position_value||1e3),S.disabled=!a(i).crypto_enabled,p(v,a(i).crypto_take_profit_pct||10),v.disabled=!a(i).crypto_enabled,p(I,a(i).crypto_stop_loss_pct||5),I.disabled=!a(i).crypto_enabled},[()=>(a(i).crypto_symbols||["BTC/USD","ETH/USD","SOL/USD"]).join(", ")]),L(T,b)},$$slots:{default:!0}}),e(q);var _t=t(q,2),Bt=l(_t);W(Bt,{title:"STALE POSITION MANAGEMENT",children:(T,z)=>{var b=pe(),f=l(b),x=l(f);o(x),x.__change=v=>s("stale_position_enabled",v.target.checked),V(2),e(f);var d=t(f,2),y=l(d),_=t(l(y),2);o(_),_.__input=v=>s("stale_max_hold_days",Number(v.target.value)),e(y);var h=t(y,2),g=t(l(h),2);o(g),g.__input=v=>s("stale_min_gain_pct",Number(v.target.value)),e(h);var m=t(h,2),u=t(l(m),2);o(u),u.__input=v=>s("stale_social_volume_decay",Number(v.target.value)),V(2),e(m);var S=t(m,2),k=t(l(S),2);o(k),k.__input=v=>s("stale_no_mentions_hours",Number(v.target.value)),V(2),e(S),e(d),e(b),j(()=>{ht(x,a(i).stale_position_enabled??!0),p(_,a(i).stale_max_hold_days||3),_.disabled=!a(i).stale_position_enabled,p(g,a(i).stale_min_gain_pct||5),g.disabled=!a(i).stale_position_enabled,p(u,a(i).stale_social_volume_decay||.3),u.disabled=!a(i).stale_position_enabled,p(k,a(i).stale_no_mentions_hours||8),k.disabled=!a(i).stale_position_enabled}),L(T,b)},$$slots:{default:!0}}),e(_t);var Nt=t(_t,2),lt=l(Nt);lt.__click=ft;var Ht=l(lt,!0);e(lt);var Kt=t(lt,2);{var qt=T=>{var z=de(),b=l(z,!0);e(z),j(()=>mt(b,a(F))),L(T,z)};At(Kt,T=>{a(F)&&T(qt)})}e(Nt),j(()=>{lt.disabled=a(K),mt(Ht,a(K)?"Saving...":"Save Configuration")}),L(N,P)},Ut=N=>{W(N,{title:"LOADING",children:(P,O)=>{var C=ve();L(P,C)},$$slots:{default:!0}})};At(Rt,N=>{a(i)?N(Gt):N(Ut,!1)})}e(kt),e(nt),L(n,nt),Yt()}Qt(["click","input","change"]);export{xe as component};
