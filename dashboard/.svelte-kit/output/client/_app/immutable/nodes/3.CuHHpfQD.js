import{a as G,f as U}from"../chunks/Dvq9GajI.js";import{o as Vt}from"../chunks/CX1Vrt1c.js";import{H as Lt,I as jt,J as Jt,K as Wt,L as Yt,M as Qt,A as Xt,N as et,O as Pt,l as Zt,t as a,P as H,C as te,D as l,G as t,F as e,Q as j,R as Mt,B as J,z as Ot}from"../chunks/BMldKSzV.js";import{d as ee,s as mt}from"../chunks/BS5HiHz8.js";import{i as At}from"../chunks/CobWLHRY.js";import{d as O,e as ae,P as Q,i as le,r as n,S as ie,b as Ct,s as se,a as d,c as ht}from"../chunks/9l2XBJ39.js";const oe=[];function ft(s,N=!1,z=!1){return ot(s,new Map,"",oe,null,z)}function ot(s,N,z,C,B=null,W=!1){if(typeof s=="object"&&s!==null){var X=N.get(s);if(X!==void 0)return X;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(Lt(s)){var P=Array(s.length);N.set(s,P),B!==null&&N.set(B,P);for(var i=0;i<s.length;i+=1){var o=s[i];i in s&&(P[i]=ot(o,N,z,C,null,W))}return P}if(jt(s)===Jt){P={},N.set(s,P),B!==null&&N.set(B,P);for(var it in s)P[it]=ot(s[it],N,z,C,null,W);return P}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function"&&!W)return ot(s.toJSON(),N,z,C,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}function gt(s,N,z=!1){if(s.multiple){if(N==null)return;if(!Lt(N))return Yt();for(var C of s.options)C.selected=N.includes(Dt(C));return}for(C of s.options){var B=Dt(C);if(Qt(B,N)){C.selected=!0;return}}(!z||N!==void 0)&&(s.selectedIndex=-1)}function Et(s){var N=new MutationObserver(()=>{gt(s,s.__value)});N.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Wt(()=>{N.disconnect()})}function Dt(s){return"__value"in s?s.__value:s.value}var ne=U("<li><button> </button></li>"),re=U('<div class="space-y-4"><div><label class="hud-label block mb-1">Backend URL</label> <input type="text" class="hud-input w-full" placeholder="Leave empty for relative /api (default)"/> <p class="text-[9px] text-hud-text-dim mt-1">E.g. https://mahoraga.jurrejan.workers.dev/agent â€” leave empty for local dev.</p></div> <div><label class="hud-label block mb-1">API Token</label> <input type="password" class="hud-input w-full" placeholder="Enter MAHORAGA_API_TOKEN"/> <p class="text-[9px] text-hud-text-dim mt-1">Your MAHORAGA_API_TOKEN from Cloudflare secrets. Required for all API access.</p></div> <div class="flex items-center gap-4"><button class="hud-button">Save Connection</button> <!></div></div>'),ue=U('<div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Max Position Value ($)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max Positions</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Position Size (% of Cash)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Starting Equity ($)</label> <input type="number" class="hud-input w-full"/> <p class="text-[9px] text-hud-text-dim mt-1">For P&L calculation</p></div></div>'),de=U('<div class="space-y-4"><div><h3 class="hud-label mb-3 text-hud-primary">Sentiment Thresholds</h3> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Min Sentiment to Buy (0-1)</label> <input type="number" step="0.05" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Min Analyst Confidence (0-1)</label> <input type="number" step="0.05" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Sell Sentiment Threshold</label> <input type="number" step="0.05" class="hud-input w-full"/></div></div></div> <div><h3 class="hud-label mb-3 text-hud-primary">Stop Loss / Take Profit</h3> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Take Profit (%)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Stop Loss (%)</label> <input type="number" class="hud-input w-full"/></div></div></div> <div><h3 class="hud-label mb-3 text-hud-primary">Polling Intervals</h3> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Data Poll (ms)</label> <input type="number" step="1000" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Analyst Interval (ms)</label> <input type="number" step="1000" class="hud-input w-full"/></div></div></div></div>'),pe=U('<p class="text-[9px] text-hud-text-dim mb-3">Provider is set via LLM_PROVIDER env var (auto/openai/claude). Models must match your active provider.</p> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Research Model (cheap)</label> <select class="hud-input w-full"><optgroup label="Claude"><option>claude-haiku-4.5</option> <option>claude-sonnet-4.5</option></optgroup><optgroup label="OpenAI"><option>gpt-5-mini</option> <option>gpt-4o-mini</option></optgroup><optgroup label="OpenAI Reasoning"><option>o4-mini</option> <option>o3-mini</option></optgroup></select></div> <div><label class="hud-label block mb-1">Analyst Model (smart)</label> <select class="hud-input w-full"><optgroup label="Claude"><option>claude-opus-4.5 (best)</option> <option>claude-sonnet-4.5</option> <option>claude-haiku-4.5 (cheaper)</option></optgroup><optgroup label="OpenAI"><option>gpt-5</option> <option>gpt-5-mini</option> <option>gpt-4o</option></optgroup><optgroup label="OpenAI Reasoning"><option>o4-mini</option> <option>o3-mini</option></optgroup></select></div></div>',1),_e=U('<div class="space-y-4"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hud-input w-4 h-4"/> <span class="hud-label">Enable Options Trading</span></label> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Min Confidence (0-1)</label> <input type="number" step="0.05" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max % Per Trade</label> <input type="number" step="0.5" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Min DTE (days)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max DTE (days)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Target Delta</label> <input type="number" step="0.05" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max Positions</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Stop Loss (%)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Take Profit (%)</label> <input type="number" class="hud-input w-full"/></div></div></div>'),ve=U('<div class="space-y-4"><div><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hud-input w-4 h-4"/> <span class="hud-label">Enable Crypto Trading</span></label> <p class="text-[9px] text-hud-text-dim mt-1">Trade crypto 24/7 based on momentum. Alpaca supports 20+ coins.</p></div> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Symbols (comma-separated)</label> <input type="text" class="hud-input w-full" placeholder="BTC/USD, ETH/USD, SOL/USD"/></div> <div><label class="hud-label block mb-1">Momentum Threshold (%)</label> <input type="number" step="0.5" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Max Position ($)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Take Profit (%)</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Stop Loss (%)</label> <input type="number" class="hud-input w-full"/></div></div></div>'),ce=U('<div class="space-y-4"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hud-input w-4 h-4"/> <span class="hud-label">Enable Stale Position Detection</span></label> <div class="grid grid-cols-2 gap-4"><div><label class="hud-label block mb-1">Max Hold Days</label> <input type="number" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Min Gain % to Keep</label> <input type="number" step="0.5" class="hud-input w-full"/></div> <div><label class="hud-label block mb-1">Social Volume Decay</label> <input type="number" step="0.1" class="hud-input w-full"/> <p class="text-[9px] text-hud-text-dim mt-1">Exit if volume drops to this % of entry</p></div> <div><label class="hud-label block mb-1">No Mentions Hours</label> <input type="number" class="hud-input w-full"/> <p class="text-[9px] text-hud-text-dim mt-1">Exit if no mentions for N hours</p></div></div></div>'),be=U('<span class="text-[11px] text-hud-success"> </span>'),me=U('<section id="section-trading"><!></section> <section id="section-risk"><!></section> <section id="section-llm"><!></section> <section id="section-options"><!></section> <section id="section-crypto"><!></section> <section id="section-stale"><!></section> <div class="fixed bottom-0 left-48 right-0 bg-hud-bg border-t border-hud-line p-4 flex items-center gap-4"><button class="hud-button"> </button> <!></div>',1),he=U('<p class="text-hud-text-dim text-[11px]">Waiting for config from backend...</p>'),fe=U('<div class="min-h-screen bg-hud-bg flex"><nav class="w-48 shrink-0 border-r border-hud-line p-4 sticky top-0 h-screen"><a href="/" class="hud-label hover:text-hud-primary transition-colors block mb-6">&larr; DASHBOARD</a> <h2 class="text-sm font-light text-hud-text-bright mb-4">SETTINGS</h2> <ul class="space-y-1"></ul></nav> <main class="flex-1 max-w-4xl p-6 pb-20 space-y-6"><section id="section-connection"><!></section> <!></main></div>');function we(s,N){Xt(N,!0);const z=[{id:"connection",label:"Connection"},{id:"trading",label:"Trading"},{id:"risk",label:"Risk"},{id:"llm",label:"LLM"},{id:"options",label:"Options"},{id:"crypto",label:"Crypto"},{id:"stale",label:"Stale Positions"}];let C=et("connection"),B=et(!1),W=et(null),X=et(Pt(localStorage.getItem("mahoraga_backend_url")||"")),P=et(Pt(localStorage.getItem("mahoraga_api_token")||"")),i=et(null);Vt(()=>{O.status?O.config&&H(i,ft(O.config),!0):O.poll().then(()=>{O.config&&H(i,ft(O.config),!0)})}),Zt(()=>{O.config&&!a(i)&&H(i,ft(O.config),!0)});function o(S,M){a(i)&&H(i,{...a(i),[S]:M},!0)}function it(){a(X)?localStorage.setItem("mahoraga_backend_url",a(X)):localStorage.removeItem("mahoraga_backend_url"),a(P)?localStorage.setItem("mahoraga_api_token",a(P)):localStorage.removeItem("mahoraga_api_token"),O.poll(),xt("Connection settings saved")}async function yt(){if(a(i)){H(B,!0);try{await O.handleSaveConfig(a(i)),xt("Configuration saved")}finally{H(B,!1)}}}function xt(S){H(W,S,!0),setTimeout(()=>H(W,null),2e3)}function Rt(S){var M;H(C,S,!0),(M=document.getElementById(`section-${S}`))==null||M.scrollIntoView({behavior:"smooth"})}var nt=fe(),rt=l(nt),kt=t(l(rt),4);ae(kt,21,()=>z,le,(S,M)=>{var E=ne(),D=l(E);D.__click=()=>Rt(a(M).id);var Y=l(D,!0);e(D),e(E),J(()=>{se(D,1,`w-full text-left px-2 py-1.5 text-[11px] transition-colors ${a(C)===a(M).id?"text-hud-text-bright bg-hud-line/30":"text-hud-text-dim hover:text-hud-text"}`),mt(Y,a(M).label)}),G(S,E)}),e(kt),e(rt);var Nt=t(rt,2),ut=l(Nt),Gt=l(ut);Q(Gt,{title:"CONNECTION",children:(S,M)=>{var E=re(),D=l(E),Y=t(l(D),2);n(Y),j(2),e(D);var at=t(D,2),Z=t(l(at),2);n(Z),j(2),e(at);var st=t(at,2),tt=l(st);tt.__click=it;var dt=t(tt,2);{let F=Mt(()=>O.error?"error":O.status?"active":"inactive"),pt=Mt(()=>O.error?"DISCONNECTED":O.status?"CONNECTED":"UNKNOWN");ie(dt,{get status(){return a(F)},get label(){return a(pt)}})}e(st),e(E),Ct(Y,()=>a(X),F=>H(X,F)),Ct(Z,()=>a(P),F=>H(P,F)),G(S,E)},$$slots:{default:!0}}),e(ut);var Ut=t(ut,2);{var Bt=S=>{var M=me(),E=Ot(M),D=l(E);Q(D,{title:"POSITION LIMITS",children:(I,V)=>{var b=ue(),g=l(b),x=t(l(g),2);n(x),x.__input=u=>o("max_position_value",Number(u.target.value)),e(g);var p=t(g,2),y=t(l(p),2);n(y),y.__input=u=>o("max_positions",Number(u.target.value)),e(p);var _=t(p,2),h=t(l(_),2);n(h),h.__input=u=>o("position_size_pct_of_cash",Number(u.target.value)),e(_);var f=t(_,2),m=t(l(f),2);n(m),m.__input=u=>o("starting_equity",Number(u.target.value)),j(2),e(f),e(b),J(()=>{d(x,a(i).max_position_value),d(y,a(i).max_positions),d(h,a(i).position_size_pct_of_cash),d(m,a(i).starting_equity||1e5)}),G(I,b)},$$slots:{default:!0}}),e(E);var Y=t(E,2),at=l(Y);Q(at,{title:"RISK MANAGEMENT",children:(I,V)=>{var b=de(),g=l(b),x=t(l(g),2),p=l(x),y=t(l(p),2);n(y),y.__input=T=>o("min_sentiment_score",Number(T.target.value)),e(p);var _=t(p,2),h=t(l(_),2);n(h),h.__input=T=>o("min_analyst_confidence",Number(T.target.value)),e(_);var f=t(_,2),m=t(l(f),2);n(m),m.__input=T=>o("sell_sentiment_threshold",Number(T.target.value)),e(f),e(x),e(g);var u=t(g,2),w=t(l(u),2),k=l(w),v=t(l(k),2);n(v),v.__input=T=>o("take_profit_pct",Number(T.target.value)),e(k);var A=t(k,2),$=t(l(A),2);n($),$.__input=T=>o("stop_loss_pct",Number(T.target.value)),e(A),e(w),e(u);var r=t(u,2),L=t(l(r),2),R=l(L),K=t(l(R),2);n(K),K.__input=T=>o("data_poll_interval_ms",Number(T.target.value)),e(R);var q=t(R,2),c=t(l(q),2);n(c),c.__input=T=>o("analyst_interval_ms",Number(T.target.value)),e(q),e(L),e(r),e(b),J(()=>{d(y,a(i).min_sentiment_score),d(h,a(i).min_analyst_confidence),d(m,a(i).sell_sentiment_threshold),d(v,a(i).take_profit_pct),d($,a(i).stop_loss_pct),d(K,a(i).data_poll_interval_ms),d(c,a(i).analyst_interval_ms)}),G(I,b)},$$slots:{default:!0}}),e(Y);var Z=t(Y,2),st=l(Z);Q(st,{title:"LLM CONFIGURATION",children:(I,V)=>{var b=pe(),g=t(Ot(b),2),x=l(g),p=t(l(x),2);p.__change=bt=>o("llm_model",bt.target.value);var y=l(p),_=l(y);_.value=_.__value="claude-haiku-4-20250414";var h=t(_,2);h.value=h.__value="claude-sonnet-4-5-20250414",e(y);var f=t(y),m=l(f);m.value=m.__value="gpt-5-mini";var u=t(m,2);u.value=u.__value="gpt-4o-mini",e(f);var w=t(f),k=l(w);k.value=k.__value="o4-mini";var v=t(k,2);v.value=v.__value="o3-mini",e(w),e(p);var A;Et(p),e(x);var $=t(x,2),r=t(l($),2);r.__change=bt=>o("llm_analyst_model",bt.target.value);var L=l(r),R=l(L);R.value=R.__value="claude-opus-4-5-20251101";var K=t(R,2);K.value=K.__value="claude-sonnet-4-5-20250414";var q=t(K,2);q.value=q.__value="claude-haiku-4-20250414",e(L);var c=t(L),T=l(c);T.value=T.__value="gpt-5";var vt=t(T,2);vt.value=vt.__value="gpt-5-mini";var wt=t(vt,2);wt.value=wt.__value="gpt-4o",e(c);var Tt=t(c),ct=l(Tt);ct.value=ct.__value="o4-mini";var It=t(ct,2);It.value=It.__value="o3-mini",e(Tt),e(r);var $t;Et(r),e($),e(g),J(()=>{A!==(A=a(i).llm_model)&&(p.value=(p.__value=a(i).llm_model)??"",gt(p,a(i).llm_model)),$t!==($t=a(i).llm_analyst_model||"claude-sonnet-4-5-20250414")&&(r.value=(r.__value=a(i).llm_analyst_model||"claude-sonnet-4-5-20250414")??"",gt(r,a(i).llm_analyst_model||"claude-sonnet-4-5-20250414"))}),G(I,b)},$$slots:{default:!0}}),e(Z);var tt=t(Z,2),dt=l(tt);Q(dt,{title:"OPTIONS TRADING (BETA)",children:(I,V)=>{var b=_e(),g=l(b),x=l(g);n(x),x.__change=c=>o("options_enabled",c.target.checked),j(2),e(g);var p=t(g,2),y=l(p),_=t(l(y),2);n(_),_.__input=c=>o("options_min_confidence",Number(c.target.value)),e(y);var h=t(y,2),f=t(l(h),2);n(f),f.__input=c=>o("options_max_pct_per_trade",Number(c.target.value)),e(h);var m=t(h,2),u=t(l(m),2);n(u),u.__input=c=>o("options_min_dte",Number(c.target.value)),e(m);var w=t(m,2),k=t(l(w),2);n(k),k.__input=c=>o("options_max_dte",Number(c.target.value)),e(w);var v=t(w,2),A=t(l(v),2);n(A),A.__input=c=>o("options_target_delta",Number(c.target.value)),e(v);var $=t(v,2),r=t(l($),2);n(r),r.__input=c=>o("options_max_positions",Number(c.target.value)),e($);var L=t($,2),R=t(l(L),2);n(R),R.__input=c=>o("options_stop_loss_pct",Number(c.target.value)),e(L);var K=t(L,2),q=t(l(K),2);n(q),q.__input=c=>o("options_take_profit_pct",Number(c.target.value)),e(K),e(p),e(b),J(()=>{ht(x,a(i).options_enabled||!1),d(_,a(i).options_min_confidence||.75),_.disabled=!a(i).options_enabled,d(f,a(i).options_max_pct_per_trade||2),f.disabled=!a(i).options_enabled,d(u,a(i).options_min_dte||7),u.disabled=!a(i).options_enabled,d(k,a(i).options_max_dte||45),k.disabled=!a(i).options_enabled,d(A,a(i).options_target_delta||.35),A.disabled=!a(i).options_enabled,d(r,a(i).options_max_positions||3),r.disabled=!a(i).options_enabled,d(R,a(i).options_stop_loss_pct||50),R.disabled=!a(i).options_enabled,d(q,a(i).options_take_profit_pct||100),q.disabled=!a(i).options_enabled}),G(I,b)},$$slots:{default:!0}}),e(tt);var F=t(tt,2),pt=l(F);Q(pt,{title:"CRYPTO TRADING (24/7)",children:(I,V)=>{var b=ve(),g=l(b),x=l(g),p=l(x);n(p),p.__change=r=>o("crypto_enabled",r.target.checked),j(2),e(x),j(2),e(g);var y=t(g,2),_=l(y),h=t(l(_),2);n(h),h.__input=r=>o("crypto_symbols",r.target.value.split(",").map(L=>L.trim())),e(_);var f=t(_,2),m=t(l(f),2);n(m),m.__input=r=>o("crypto_momentum_threshold",Number(r.target.value)),e(f);var u=t(f,2),w=t(l(u),2);n(w),w.__input=r=>o("crypto_max_position_value",Number(r.target.value)),e(u);var k=t(u,2),v=t(l(k),2);n(v),v.__input=r=>o("crypto_take_profit_pct",Number(r.target.value)),e(k);var A=t(k,2),$=t(l(A),2);n($),$.__input=r=>o("crypto_stop_loss_pct",Number(r.target.value)),e(A),e(y),e(b),J(r=>{ht(p,a(i).crypto_enabled||!1),d(h,r),h.disabled=!a(i).crypto_enabled,d(m,a(i).crypto_momentum_threshold||2),m.disabled=!a(i).crypto_enabled,d(w,a(i).crypto_max_position_value||1e3),w.disabled=!a(i).crypto_enabled,d(v,a(i).crypto_take_profit_pct||10),v.disabled=!a(i).crypto_enabled,d($,a(i).crypto_stop_loss_pct||5),$.disabled=!a(i).crypto_enabled},[()=>(a(i).crypto_symbols||["BTC/USD","ETH/USD","SOL/USD"]).join(", ")]),G(I,b)},$$slots:{default:!0}}),e(F);var _t=t(F,2),Kt=l(_t);Q(Kt,{title:"STALE POSITION MANAGEMENT",children:(I,V)=>{var b=ce(),g=l(b),x=l(g);n(x),x.__change=v=>o("stale_position_enabled",v.target.checked),j(2),e(g);var p=t(g,2),y=l(p),_=t(l(y),2);n(_),_.__input=v=>o("stale_max_hold_days",Number(v.target.value)),e(y);var h=t(y,2),f=t(l(h),2);n(f),f.__input=v=>o("stale_min_gain_pct",Number(v.target.value)),e(h);var m=t(h,2),u=t(l(m),2);n(u),u.__input=v=>o("stale_social_volume_decay",Number(v.target.value)),j(2),e(m);var w=t(m,2),k=t(l(w),2);n(k),k.__input=v=>o("stale_no_mentions_hours",Number(v.target.value)),j(2),e(w),e(p),e(b),J(()=>{ht(x,a(i).stale_position_enabled??!0),d(_,a(i).stale_max_hold_days||3),_.disabled=!a(i).stale_position_enabled,d(f,a(i).stale_min_gain_pct||5),f.disabled=!a(i).stale_position_enabled,d(u,a(i).stale_social_volume_decay||.3),u.disabled=!a(i).stale_position_enabled,d(k,a(i).stale_no_mentions_hours||8),k.disabled=!a(i).stale_position_enabled}),G(I,b)},$$slots:{default:!0}}),e(_t);var St=t(_t,2),lt=l(St);lt.__click=yt;var qt=l(lt,!0);e(lt);var zt=t(lt,2);{var Ft=I=>{var V=be(),b=l(V,!0);e(V),J(()=>mt(b,a(W))),G(I,V)};At(zt,I=>{a(W)&&I(Ft)})}e(St),J(()=>{lt.disabled=a(B),mt(qt,a(B)?"Saving...":"Save Configuration")}),G(S,M)},Ht=S=>{Q(S,{title:"LOADING",children:(M,E)=>{var D=he();G(M,D)},$$slots:{default:!0}})};At(Ut,S=>{a(i)?S(Bt):S(Ht,!1)})}e(Nt),e(nt),G(s,nt),te()}ee(["click","input","change"]);export{we as component};
